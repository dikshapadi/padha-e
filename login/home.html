<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Details Form</title>

</head>

<body>
    <h1>User Details</h1>
    <form id="userDetailsForm">
        <label>Name: </label><input type="text" id="name"><br>
        <label>Age: </label><input type="number" id="age"><br>
        <label>Phone Number: </label><input type="tel" id="phoneNumber"><br>
        <label>Gender: </label>
        <input type="radio" name="gender" value="Male"> Mal
        <input type="radio" name="gender" value="Female"> Female<br>

        <label>Class: </label>
        <select id="class">
            <option value="primary">Primary</option>
            <option value="secondary">Secondary</option>
            <option value="college">College</option>
        </select><br>

        <label>You are: </label>
        <select id="youAre">
            <option value="student">Student</option>
            <option value="mentor">Mentor</option>
        </select><br>

        <label>Address: </label><input type="text" id="address"><br>

        <label>State: </label>
        <select id="state">
            <!-- Add all states in India -->
            <option value="Delhi">Delhi</option>
            <option value="Maharashtra">Maharashtra</option>
            <!-- Add other states -->
        </select><br>

        <input type="submit" value="Submit">
    </form>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-auth.js";


        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBD6ZsOT1P4lPZbQ0HVYHZrPGvaPk274ds",
            authDomain: "sih-e-f67f9.firebaseapp.com",
            databaseURL: "https://sih-e-f67f9-default-rtdb.asia-southeast1.firebasedatabase.app/",
            projectId: "sih-e-f67f9",
            storageBucket: "sih-e-f67f9.appspot.com",
            messagingSenderId: "113038032158",
            appId: "1:113038032158:web:6b01cde8843a62e8841d0f",
            measurementId: "G-FWVHBTC79W"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);


        // Get elements from the form
        const form = document.getElementById("userDetailsForm");
        form.addEventListener('submit', function (e) {
            e.preventDefault();

            const user = auth.currentUser;
            if (user) {
                const userId = user.uid;
                console.log(userId);

                // Save data to Firebase Realtime Database
                const database = getDatabase();
                const data = {
                    name: document.getElementById("name").value,
                    age: document.getElementById("age").value,
                    phoneNumber: document.getElementById("phoneNumber").value,
                    gender: document.querySelector('input[name="gender"]:checked').value,
                    class: document.getElementById("class").value,
                    youAre: document.getElementById("youAre").value,
                    address: document.getElementById("address").value,
                    state: document.getElementById("state").value,
                };

                // Save data to the database
                const userRef = ref(database, 'users/' + userId);
                set(userRef, data)
                    .then(() => {
                        alert("Data saved successfully.");
                    })
                    .catch((error) => {
                        console.error("Error saving data: ", error);
                    });
            } else {
                // Handle the case when there is no authenticated user
                alert("No authenticated user. Please log in or register.");
            }


        });
    </script>
</body>

</html>